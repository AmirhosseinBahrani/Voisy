<!DOCTYPE html>
<html>
   <head>
      <meta charset = "UTF-8">
      <title>Voisy</title>
      <!-- "../bower_components/bootstrap/dist/css/bootstrap.min.css" -->
      <meta name="viewport" content="width=device-width , initial-scale=1.0">
      <link rel = "stylesheet" href = "../css/index.css" />
      
   </head>   
    
    
    <body>
        <header class="header">
            <div class="container"><h1 id="taskbar-title">Voisy</h1></div>
            <div id="line"></div> 
            <nav>
                <li class="for-taskbar" id="selected"><div class="upload-container"><object class="icon" data="../svg/color/upload.svg" width="20" height="20"></object><a class="nav-links">Import</a></div></li>

                <li class="for-taskbar"><div class="upload-container"><object class="icon" data="../svg/color/music-note-beamed.svg" width="20" height="20"></object><a href="./sound.html" class="nav-links">Sound</a></div></li>
                <li class="for-taskbar"><div class="upload-container"><object id="subtitle-tab" class="icon" data="../svg/color/subtitles-svgrepo-com.svg" width="20" height="20"></object><a href="subtitle.html" class="nav-links">Subtitle</a></div></li>
                <li class="for-taskbar"><div class="upload-container"><object id="export-tab" class="icon" data="../svg/color/download.svg" width="20" height="20"></object><a href="./audiosetting.html" class="nav-links">Audio</a></div></li>
                <li class="for-taskbar"><div class="upload-container"><object id="export-tab" class="icon" data="../svg/color/download.svg" width="20" height="20"></object><a href="./export.html" class="nav-links">Export</a></div></li>
            </nav>
        </header>
        
        <section class="section" id="import-file">
            <input id="real-choose-file" type="file" hidden="hidden">
            <button id="choose-file" type="button">choose file</button>
            <span id="choosen-file-directory">Nothing yet</span>
            <button id="pause-play-button" class="play-btn pause">
                <span id="left-side"></span>
                <span id="right-side"></span>
            </button>
            <div id="sound-bar-container">
                
                <div id="progress"></div>
                <input id="sound-bar" type="range" value="0">

            </div>
        </section>
       
        <script type="text/javascript">
            const soundTabAnimation = document.getElementById("for-sound-tab");
            const soundTab = document.getElementById("tab-sound");
            const fakeUploadButton = document.getElementById("choose-file")
            const realUploadButton = document.getElementById("real-choose-file")
            const directoryText = document.getElementById("choosen-file-directory")
            const songBar = document.getElementById("sound-bar")
            const progress = document.getElementById("progress")
            const leftSide = document.getElementById("left-side")
            const rightSide = document.getElementById("right-side")
            const pauseButton = document.getElementById("pause-play-button")
            var paused = true
            rightSide.style.height = "0px"
            leftSide.style.clipPath = "polygon(0 0, 100% 50%, 100% 50%, 0% 100%)"
            leftSide.style.width = "12px"
            pauseButton.addEventListener("click" , function(){
                if(!paused){
                    rightSide.style.height = "0px"
                    leftSide.style.clipPath = "polygon(0 0, 100% 50%, 100% 50%, 0% 100%)"
                    leftSide.style.width = "12px"
                    paused = true
                }else{
                    rightSide.style.height = "15px"
                    leftSide.style.clipPath = " polygon(0 0, 100% 0, 100% 100%, 0% 100%)"
                    leftSide.style.width = "5px"
                    paused = false
                    
                }
            });
            songBar.addEventListener("input" , function(){
                if(songBar.value){
                    progress.style.width = (songBar.value * 2) + "px"
                };
            });
            fakeUploadButton.addEventListener("click" , function(){
                realUploadButton.click()
            });
            realUploadButton.addEventListener("change" , function(event){
                if (realUploadButton.value){
                    var text = realUploadButton.files[0].name;
                    var directory = event.target.files;
                    
                    if (typeof(Storage) !== "undefined") {
                    // Code for localStorage/sessionStorage.
                        localStorage.setItem("FileDirectory", directory[0].path)
                    } else {
                    // No Web Storage support..
                        assert("No web Storage")
                    }

                    if (text.length > 25) { 
                        text = text.substring(0, 24) + "...";
                    };
                    directoryText.innerHTML = text
                }else{
                    directoryText.innerHTML = "Nothing yet"
                }
            });
            soundTab.addEventListener("mouseover" , function(){
                soundTabAnimation.style.width = "16vw";
                soundTabAnimation.style.marginLeft = "0vw"
                soundTabAnimation.style.opacity = "100%"
            });
            soundTab.addEventListener("mouseleave" , function(){
                soundTabAnimation.style.width = "10vw";
                soundTabAnimation.style.marginLeft = "3vw"
                soundTabAnimation.style.opacity = "0%"
            });
        </script>
    </body>
</html> 
